<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è£ã®é¡”è¨ºæ–­</title>
<meta property="og:title" content="è£ã®é¡”è¨ºæ–­">
<meta property="og:description" content="ã‚ãªãŸã®è£ã®é¡”ã€æš´ã„ã¡ã‚ƒã„ã¾ã™ã€‚">
<meta property="og:image" content="https://paul13131313.github.io/ura-shindan/ogp.png">
<meta property="og:url" content="https://paul13131313.github.io/ura-shindan/">
<meta name="twitter:card" content="summary_large_image">
<link rel="icon" type="image/svg+xml" href="favicon.svg">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Kaisei+Opti:wght@700&family=Zen+Kaku+Gothic+New:wght@400;700&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --bg: #0a0a0f;
  --card-bg: #13131f;
  --accent1: #a21caf;
  --accent2: #f59e0b;
  --text: #e2e0e8;
  --font-title: 'Kaisei Opti', serif;
  --font-body: 'Zen Kaku Gothic New', sans-serif;
}

html { font-size: 16px; }

body {
  font-family: var(--font-body);
  background: var(--bg);
  color: var(--text);
  min-height: 100dvh;
  overflow-x: hidden;
  position: relative;
}

/* â”€â”€ Floating orbs â”€â”€ */
.orb {
  position: fixed;
  border-radius: 50%;
  filter: blur(80px);
  opacity: .35;
  pointer-events: none;
  z-index: 0;
}
.orb--1 {
  width: 340px; height: 340px;
  background: radial-gradient(circle, #a21caf, transparent 70%);
  top: -60px; left: -80px;
  animation: float1 14s ease-in-out infinite alternate;
}
.orb--2 {
  width: 260px; height: 260px;
  background: radial-gradient(circle, #6d28d9, transparent 70%);
  bottom: 10%; right: -60px;
  animation: float2 18s ease-in-out infinite alternate;
}
.orb--3 {
  width: 200px; height: 200px;
  background: radial-gradient(circle, #f59e0b, transparent 70%);
  top: 40%; left: 50%;
  animation: float3 20s ease-in-out infinite alternate;
}
@keyframes float1 { to { transform: translate(60px, 80px); } }
@keyframes float2 { to { transform: translate(-80px, -60px); } }
@keyframes float3 { to { transform: translate(-100px, 40px); } }

/* â”€â”€ Container â”€â”€ */
.container {
  position: relative;
  z-index: 1;
  max-width: 480px;
  margin: 0 auto;
  padding: 24px 20px 60px;
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

/* â”€â”€ Screens â”€â”€ */
.screen { display: none; animation: fadeIn .6s ease; }
.screen.active { display: block; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(16px); } to { opacity: 1; transform: translateY(0); } }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOP SCREEN
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.top-eye {
  width: 120px; height: 120px;
  margin: 0 auto 32px;
  position: relative;
}
.top-eye__outer {
  width: 120px; height: 120px;
  border-radius: 50%;
  border: 3px solid var(--accent1);
  display: flex; align-items: center; justify-content: center;
  position: relative;
  box-shadow: 0 0 40px rgba(162,28,175,.4), inset 0 0 30px rgba(162,28,175,.15);
}
.top-eye__iris {
  width: 60px; height: 60px;
  border-radius: 50%;
  background: radial-gradient(circle at 40% 40%, #d946ef, #7c3aed 60%, #3b0764);
  position: relative;
  animation: irisGlow 3s ease-in-out infinite alternate;
}
@keyframes irisGlow {
  from { box-shadow: 0 0 20px #a21caf, 0 0 60px rgba(162,28,175,.3); }
  to   { box-shadow: 0 0 35px #d946ef, 0 0 80px rgba(217,70,239,.4); }
}
.top-eye__pupil {
  width: 22px; height: 22px;
  border-radius: 50%;
  background: #0a0a0f;
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  animation: pupilLook 6s ease-in-out infinite;
}
@keyframes pupilLook {
  0%, 100% { transform: translate(-50%, -50%); }
  25% { transform: translate(-35%, -55%); }
  50% { transform: translate(-55%, -45%); }
  75% { transform: translate(-45%, -55%); }
}
.top-eye__highlight {
  width: 8px; height: 8px;
  border-radius: 50%;
  background: #fff;
  position: absolute; top: 30%; left: 58%;
  opacity: .8;
}
/* Eyelid blink */
.top-eye__lid {
  position: absolute; top: 0; left: 0;
  width: 120px; height: 120px;
  border-radius: 50%;
  background: var(--bg);
  transform-origin: center top;
  animation: blink 4s ease-in-out infinite;
  transform: scaleY(0);
}
@keyframes blink {
  0%, 90%, 100% { transform: scaleY(0); }
  95% { transform: scaleY(1); }
}

.title {
  font-family: var(--font-title);
  font-size: 2.2rem;
  text-align: center;
  background: linear-gradient(135deg, var(--accent1), #d946ef, var(--accent2));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  line-height: 1.4;
  margin-bottom: 12px;
}
.subtitle {
  text-align: center;
  font-size: .95rem;
  color: #9f9bab;
  margin-bottom: 40px;
  letter-spacing: .05em;
}

.btn-start {
  display: block;
  width: 100%;
  max-width: 280px;
  margin: 0 auto;
  padding: 16px 0;
  font-family: var(--font-body);
  font-size: 1.1rem;
  font-weight: 700;
  color: #fff;
  background: linear-gradient(135deg, var(--accent1), #7c3aed);
  border: none;
  border-radius: 60px;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  transition: transform .2s, box-shadow .2s;
  box-shadow: 0 4px 24px rgba(162,28,175,.4);
}
.btn-start:hover { transform: translateY(-2px); box-shadow: 0 6px 32px rgba(162,28,175,.55); }
.btn-start:active { transform: translateY(0); }
.btn-start::after {
  content: '';
  position: absolute; top: -50%; left: -50%;
  width: 200%; height: 200%;
  background: linear-gradient(135deg, transparent 40%, rgba(255,255,255,.12) 50%, transparent 60%);
  animation: shimmer 3s infinite;
}
@keyframes shimmer { from { transform: translateX(-100%); } to { transform: translateX(100%); } }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   QUESTION SCREEN
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.progress-bar {
  width: 100%;
  height: 4px;
  background: rgba(255,255,255,.08);
  border-radius: 2px;
  margin-bottom: 12px;
  overflow: hidden;
}
.progress-bar__fill {
  height: 100%;
  background: linear-gradient(90deg, var(--accent1), var(--accent2));
  border-radius: 2px;
  transition: width .4s ease;
}
.progress-label {
  font-size: .8rem;
  color: #7a7688;
  margin-bottom: 28px;
  text-align: right;
}

.question-text {
  font-family: var(--font-title);
  font-size: 1.25rem;
  line-height: 1.7;
  margin-bottom: 28px;
  text-align: center;
  animation: fadeIn .4s ease;
}

.choices { display: flex; flex-direction: column; gap: 12px; }
.choice-btn {
  width: 100%;
  padding: 16px 20px;
  font-family: var(--font-body);
  font-size: .95rem;
  line-height: 1.5;
  color: var(--text);
  background: var(--card-bg);
  border: 1px solid rgba(162,28,175,.2);
  border-radius: 14px;
  cursor: pointer;
  text-align: left;
  transition: background .2s, border-color .2s, transform .15s, box-shadow .2s;
  position: relative;
  overflow: hidden;
}
.choice-btn:hover {
  background: rgba(162,28,175,.1);
  border-color: var(--accent1);
  transform: translateY(-1px);
  box-shadow: 0 4px 20px rgba(162,28,175,.2);
}
.choice-btn:active { transform: translateY(0); }
.choice-btn.selected {
  background: rgba(162,28,175,.2);
  border-color: var(--accent1);
  box-shadow: 0 0 20px rgba(162,28,175,.3);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESULT SCREEN
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.result-container { animation: resultAppear .8s ease; }
@keyframes resultAppear {
  0%   { opacity: 0; transform: scale(.9) translateY(20px); filter: blur(8px); }
  100% { opacity: 1; transform: scale(1) translateY(0); filter: blur(0); }
}

.result-badge {
  width: 100px; height: 100px;
  margin: 0 auto 20px;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 48px;
  background: linear-gradient(135deg, rgba(162,28,175,.2), rgba(124,58,237,.15));
  border: 2px solid var(--accent1);
  box-shadow: 0 0 40px rgba(162,28,175,.3);
  animation: badgePulse 2s ease-in-out infinite alternate;
}
@keyframes badgePulse {
  from { box-shadow: 0 0 40px rgba(162,28,175,.3); }
  to   { box-shadow: 0 0 60px rgba(162,28,175,.5); }
}

.result-label {
  text-align: center;
  font-size: .85rem;
  color: var(--accent2);
  margin-bottom: 8px;
  letter-spacing: .15em;
}
.result-type {
  font-family: var(--font-title);
  font-size: 1.8rem;
  text-align: center;
  margin-bottom: 24px;
  background: linear-gradient(135deg, #d946ef, var(--accent2));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.result-card {
  background: var(--card-bg);
  border: 1px solid rgba(162,28,175,.2);
  border-radius: 16px;
  padding: 24px 20px;
  margin-bottom: 32px;
  line-height: 1.85;
  font-size: .93rem;
  color: #c5c1d0;
}

.result-actions { display: flex; flex-direction: column; gap: 12px; }
.btn-share {
  display: flex; align-items: center; justify-content: center; gap: 8px;
  width: 100%;
  padding: 14px 0;
  font-family: var(--font-body);
  font-size: 1rem;
  font-weight: 700;
  color: #fff;
  background: #000;
  border: 1px solid #333;
  border-radius: 60px;
  cursor: pointer;
  transition: background .2s;
}
.btn-share:hover { background: #1a1a2e; }
.btn-share svg { width: 18px; height: 18px; fill: #fff; }
.btn-retry {
  display: block;
  width: 100%;
  padding: 14px 0;
  font-family: var(--font-body);
  font-size: 1rem;
  font-weight: 700;
  color: var(--text);
  background: transparent;
  border: 1px solid rgba(255,255,255,.15);
  border-radius: 60px;
  cursor: pointer;
  transition: border-color .2s, background .2s;
}
.btn-retry:hover { border-color: var(--accent1); background: rgba(162,28,175,.08); }

/* â”€â”€ Fog overlay â”€â”€ */
.fog {
  position: fixed;
  bottom: 0; left: 0;
  width: 100%; height: 120px;
  background: linear-gradient(to top, rgba(10,10,15,.9), transparent);
  pointer-events: none;
  z-index: 2;
}
</style>
</head>
<body>

<div class="orb orb--1"></div>
<div class="orb orb--2"></div>
<div class="orb orb--3"></div>
<div class="fog"></div>

<div class="container">

  <!-- TOP -->
  <div id="screen-top" class="screen active">
    <div class="top-eye">
      <div class="top-eye__outer">
        <div class="top-eye__iris">
          <div class="top-eye__pupil"></div>
          <div class="top-eye__highlight"></div>
        </div>
      </div>
      <div class="top-eye__lid"></div>
    </div>
    <h1 class="title">è£ã®é¡”è¨ºæ–­</h1>
    <p class="subtitle">ã‚ãªãŸã®è£ã®é¡”ã€æš´ã„ã¡ã‚ƒã„ã¾ã™ã€‚</p>
    <button class="btn-start" id="btn-start">è¨ºæ–­ã‚’ã¯ã˜ã‚ã‚‹</button>
  </div>

  <!-- QUESTION -->
  <div id="screen-question" class="screen">
    <div class="progress-bar"><div class="progress-bar__fill" id="progress-fill"></div></div>
    <p class="progress-label" id="progress-label"></p>
    <p class="question-text" id="question-text"></p>
    <div class="choices" id="choices"></div>
  </div>

  <!-- RESULT -->
  <div id="screen-result" class="screen">
    <div class="result-container">
      <div class="result-badge" id="result-badge"></div>
      <p class="result-label">ã‚ãªãŸã®è£ã®é¡”ã¯â€¦</p>
      <h2 class="result-type" id="result-type"></h2>
      <div class="result-card" id="result-desc"></div>
      <div class="result-actions">
        <button class="btn-share" id="btn-share">
          <svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
          çµæœã‚’ã‚·ã‚§ã‚¢ã™ã‚‹
        </button>
        <button class="btn-retry" id="btn-retry">ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹</button>
      </div>
    </div>
  </div>

</div>

<script>
const TYPES = {
  nechinechi: {
    name: 'ã­ã¡ã­ã¡ã‚¹ãƒˆãƒ¼ã‚«ãƒ¼',
    emoji: 'ğŸ”',
    desc: 'SNSã§åŸ·æ‹—ã«éå»ã®ç™ºè¨€ã‚’é¡ã‚Šã€å¤±è¨€ã‚’è¦‹ã¤ã‘ã¦ã¯ç‚ä¸Šã•ã›ã‚‹ã“ã¨ã‚’ç”Ÿãç”²æ–ã«ã—ã¦ã„ã‚‹ã€‚ã€Œ3å¹´å‰ã®ãƒ„ã‚¤ãƒ¼ãƒˆã§ã™ã‘ã©ã€ãŒå£ç™–ã€‚å®Ÿç”Ÿæ´»ã§ã¯ä½•ã®æ¥½ã—ã¿ã‚‚ãªãã€ã‚³ãƒ³ãƒ“ãƒ‹ã®æƒ£èœãƒ‘ãƒ³ã°ã‹ã‚Šé£Ÿã¹ã¦ã„ã‚‹ã€‚ç—”æŒã¡ã€‚'
  },
  guchiguchi: {
    name: 'ãã¡ãã¡ã‚¨ãƒ³ãƒšãƒ©ãƒ¼',
    emoji: 'ğŸ‘‘',
    desc: 'é£²ã¿ä¼šã®3è»’ç›®ã§æœ¬é ˜ã‚’ç™ºæ®ã—ã€åŒã˜æ„šç—´ã‚’å¾®å¦™ã«è¡¨ç¾ã‚’å¤‰ãˆã¦5å›ç¹°ã‚Šè¿”ã™å¸ç‹ã€‚å‘¨å›²ã¯ã¨ã£ãã«èã„ã¦ã„ãªã„ãŒã€æœ¬äººã¯ã€Œä¿ºã®è©±ãŠã‚‚ã—ã‚ããªã„ï¼Ÿã€ã¨ç¢ºèªã—ã¦ãã‚‹ã®ã§ä½™è¨ˆã«ã‚¿ãƒãŒæ‚ªã„ã€‚ç¿Œæœã€Œæ˜¨æ—¥ä¿ºãªã‚“ã‹è¨€ã£ãŸï¼Ÿã€ã¨èã„ã¦ãã‚‹ã¾ã§ãŒã‚»ãƒƒãƒˆã€‚'
  },
  iraira: {
    name: 'ã„ã‚‰ã„ã‚‰ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼',
    emoji: 'ğŸ’¢',
    desc: 'ã‚³ãƒ³ãƒ“ãƒ‹ã®åº—å“¡ã®å‹•ããŒé…ã„ã ã‘ã§è¡€åœ§ãŒ30ä¸ŠãŒã‚‹ã€‚ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼ã®ã€Œé–‰ã€ãƒœã‚¿ãƒ³ã‚’é€£æ‰“ã™ã‚‹ã®ãŒç™–ã€‚æœ¬äººã¯ã€ŒçŸ­æ°—ã˜ã‚ƒãªã„ã‘ã©ã€ã¨è¨€ã„å¼µã‚‹ãŒã€Wi-FiãŒ3ç§’é€”åˆ‡ã‚ŒãŸã ã‘ã§ãƒ«ãƒ¼ã‚¿ãƒ¼ã‚’å†èµ·å‹•ã—ãŸå®Ÿç¸¾ãŒã‚ã‚‹ã€‚æ•ãŒå¤‰ã‚ã‚‹ã¨çœ ã‚Œãªã„ã€‚'
  },
  harahara: {
    name: 'ã¯ã‚‰ã¯ã‚‰ãƒˆãƒ©ãƒ™ãƒ©ãƒ¼',
    emoji: 'ğŸ˜°',
    desc: 'æ—…è¡Œã®è¨ˆç”»ã‚’ç·»å¯†ã«ç«‹ã¦ã‚‹ãŒã€å½“æ—¥ã¯å…¨ã¦è£ç›®ã«å‡ºã‚‹ã€‚ãƒ‘ã‚¹ãƒãƒ¼ãƒˆã‚’3å›ç¢ºèªã—ã¦ã‚‚ã¾ã ä¸å®‰ã€‚ã€Œã‚‚ã—é£›è¡Œæ©ŸãŒè½ã¡ãŸã‚‰ã€ã‚’æ¯å›è€ƒãˆã€éºæ›¸ã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹ã€‚çµå±€ä¸€ç•ªæ¥½ã—ã‹ã£ãŸã®ã¯ç©ºæ¸¯ã®ãƒ©ã‚¦ãƒ³ã‚¸ã€‚'
  },
  perapera: {
    name: 'ãºã‚‰ãºã‚‰ãƒã‚¹ã‚¿ãƒ¼',
    emoji: 'ğŸ—£ï¸',
    desc: 'ã€Œã“ã“ã ã‘ã®è©±ãªã‚“ã ã‘ã©ã€ã‚’1æ—¥ã«8å›ä½¿ã†æƒ…å ±ãƒ†ãƒ­ãƒªã‚¹ãƒˆã€‚äººã®ç§˜å¯†ã‚’å…±æœ‰ã™ã‚‹ã“ã¨ã§ã—ã‹äººé–“é–¢ä¿‚ã‚’æ§‹ç¯‰ã§ããªã„ã€‚LINEã‚°ãƒ«ãƒ¼ãƒ—ã‚’5ã¤æ›ã‘æŒã¡ã—ã€å…¨ã¦ã§å¾®å¦™ã«é•ã†ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å™‚è©±ã‚’æµã—ã¦ã„ã‚‹ã€‚ä¿¡ç”¨ã‚¹ã‚³ã‚¢ã¯é™ã‚Šãªãã‚¼ãƒ­ã«è¿‘ã„ã€‚'
  },
  purapura: {
    name: 'ã·ã‚‰ã·ã‚‰ã‚¹ãƒ¢ãƒ¼ã‚«ãƒ¼',
    emoji: 'ğŸš¬',
    desc: 'äººç”Ÿã®ã‚ã‚‰ã‚†ã‚‹æ±ºæ–­ã‚’å…ˆå»¶ã°ã—ã«ã—ã€ã€Œã¾ã‚ãªã‚“ã¨ã‹ãªã‚‹ã£ã—ã‚‡ã€ã§30å¹´ç”Ÿãã¦ããŸã€‚ä¼‘æ—¥ã¯ç‰¹ã«äºˆå®šã‚‚ãªãè¿‘æ‰€ã‚’å¾˜å¾Šã—ã€æ°—ã¥ã„ãŸã‚‰çŸ¥ã‚‰ãªã„è¡—ã«ã„ã‚‹ã€‚è²¯é‡‘ã¯ãªã„ãŒå±æ©Ÿæ„Ÿã‚‚ãªã„ã€‚å”¯ä¸€ã®ç‰¹æŠ€ã¯ã€ã©ã‚“ãªå ´æ‰€ã§ã‚‚å–«ç…™æ‰€ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ã€‚'
  },
  herahera: {
    name: 'ã¸ã‚‰ã¸ã‚‰ãƒãƒ³ã‚¿ãƒ¼',
    emoji: 'ğŸ˜„',
    desc: 'å ´ã®ç©ºæ°—ã‚’èª­ã‚“ã§æ„›æƒ³ç¬‘ã„ã‚’ã™ã‚‹ã“ã¨ã«å…¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æŒ¯ã£ãŸäººé–“ã€‚ã€Œã‚ã‹ã‚‹ãƒ¼ã€ãŒå£ç™–ã ãŒä½•ã‚‚ã‚ã‹ã£ã¦ã„ãªã„ã€‚å…«æ–¹ç¾äººã‚’æ¥µã‚ã™ãã¦è‡ªåˆ†ã®æœ¬å½“ã®æ„è¦‹ãŒä½•ã‹ã‚ã‹ã‚‰ãªããªã£ã¦ã„ã‚‹ã€‚é¡ã®å‰ã§ç¬‘é¡”ã®ç·´ç¿’ã‚’ã—ã¦ã„ãŸã“ã¨ãŒã‚ã‚‹ã€‚'
  },
  charachara: {
    name: 'ã¡ã‚ƒã‚‰ã¡ã‚ƒã‚‰ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼',
    emoji: 'ğŸ’•',
    desc: 'æ‹æ„›ä½“è³ªã‚’è¶…ãˆã¦æ‹æ„›ä¾å­˜ç—‡ã€‚å¸¸ã«3äººã¨ãƒãƒƒãƒãƒ³ã‚°ã‚¢ãƒ—ãƒªã§ã‚„ã‚Šã¨ã‚Šã—ã€ã€Œä¿º/ç§ã£ã¦ä¸€é€”ãªã‚“ã ã‚ˆã­ã€ã¨æœ¬æ°—ã§è¨€ã†ã€‚å…ƒã‚«ãƒ¬/å…ƒã‚«ãƒã®æ•°ã‚’èã‹ã‚Œã‚‹ã¨ã€Œã¡ã‚ƒã‚“ã¨ä»˜ãåˆã£ãŸã®ã¯â€¦ã€ã¨å®šç¾©ã®è©±ã‚’å§‹ã‚ã‚‹ã€‚ã‚¹ãƒãƒ›ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®åŠåˆ†ã¯è‡ªæ’®ã‚Šã€‚'
  }
};

const QUESTIONS = [
  {
    text: 'é‡‘æ›œã®å¤œã€äºˆå®šãŒãªã‹ã£ãŸã€‚ã©ã†ã™ã‚‹ï¼Ÿ',
    choices: [
      { text: 'SNSã‚’å»¶ã€…ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã™ã‚‹', scores: { nechinechi: 2, guchiguchi: 1 } },
      { text: 'æ€¥ã«ä¸å®‰ã«ãªã£ã¦å‹é”ã«é€£çµ¡ã™ã‚‹', scores: { harahara: 2, charachara: 1 } },
      { text: 'ã¨ã‚Šã‚ãˆãšå¤–ã«å‡ºã¦æ­©ã', scores: { purapura: 2, herahera: 1 } },
      { text: 'èª°ã‹ã®å™‚è©±ã‚’ã¾ã¨ã‚ã‚‹', scores: { perapera: 2, iraira: 1 } }
    ]
  },
  {
    text: 'å‹é”ãŒå¤§ããªãƒŸã‚¹ã‚’ã—ãŸã€‚æœ€åˆã«æ€ã†ã“ã¨ã¯ï¼Ÿ',
    choices: [
      { text: 'ã€Œå‰ã‹ã‚‰è¨€ãŠã†ã¨æ€ã£ã¦ãŸã‚“ã ã‘ã©â€¦ã€', scores: { nechinechi: 2, iraira: 1 } },
      { text: 'ã€Œå¤§ä¸ˆå¤«å¤§ä¸ˆå¤«ï¼ï¼ˆå†…å¿ƒã‚¦ã‚±ã‚‹ï¼‰ã€', scores: { herahera: 2, perapera: 1 } },
      { text: 'ã€Œã¾ã‚ãã†ã„ã†ã“ã¨ã‚‚ã‚ã‚‹ã‚ˆï¼ˆä»–äººäº‹ï¼‰ã€', scores: { purapura: 2, guchiguchi: 1 } },
      { text: 'ã€Œãˆã€èª°ã«è¨€ã£ã¦ã„ã„ï¼Ÿã€', scores: { perapera: 2, charachara: 1 } }
    ]
  },
  {
    text: 'é•·è›‡ã®åˆ—ã«ä¸¦ã‚“ã§ã„ã‚‹ã€‚ã‚ãªãŸã®è¡Œå‹•ã¯ï¼Ÿ',
    choices: [
      { text: 'ä¸¦ã‚“ã§ã„ã‚‹é–“ã«ã‚¹ãƒãƒ›ã§èª°ã‹ã®éå»æŠ•ç¨¿ã‚’æ¼ã‚‹', scores: { nechinechi: 2, perapera: 1 } },
      { text: 'ã‚¤ãƒ©ã‚¤ãƒ©ã—ã¦èˆŒæ‰“ã¡ã—ãã†ã«ãªã‚‹', scores: { iraira: 2, guchiguchi: 1 } },
      { text: 'éš£ã®äººã«è©±ã—ã‹ã‘ã¦ã—ã¾ã†', scores: { charachara: 2, herahera: 1 } },
      { text: 'åˆ—ã‚’é›¢ã‚Œã¦ãµã‚‰ã£ã¨ã©ã“ã‹ã¸è¡Œã', scores: { purapura: 2, harahara: 1 } }
    ]
  },
  {
    text: 'æ—…è¡Œã®æº–å‚™ã€ã‚ãªãŸã®ã‚¹ã‚¿ã‚¤ãƒ«ã¯ï¼Ÿ',
    choices: [
      { text: 'æŒã¡ç‰©ãƒªã‚¹ãƒˆã‚’3å›ãƒã‚§ãƒƒã‚¯ã™ã‚‹', scores: { harahara: 2, iraira: 1 } },
      { text: 'å‰æ—¥ã®å¤œã«æ…Œã¦ã¦ã‚„ã‚‹', scores: { purapura: 2, herahera: 1 } },
      { text: 'ä¸€ç·’ã«è¡Œãäººã®è·ç‰©ã¾ã§æ°—ã«ãªã‚‹', scores: { charachara: 2, nechinechi: 1 } },
      { text: 'æº–å‚™ã‚ˆã‚Šå…ˆã«ç¾åœ°ã®é£²é£Ÿåº—ã‚’èª¿ã¹ã‚‹', scores: { guchiguchi: 2, perapera: 1 } }
    ]
  },
  {
    text: 'ã‚ãªãŸã®ã€Œã¤ã„é–¢ã‚ã£ã¡ã‚ƒã†ã€SNSæŠ•ç¨¿ã¯ï¼Ÿ',
    choices: [
      { text: 'ç‚ä¸Šæ¡ˆä»¶ã®ãƒªãƒ—æ¬„', scores: { nechinechi: 2, iraira: 1 } },
      { text: 'åŒ¿åã®æ„šç—´ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ', scores: { guchiguchi: 2, harahara: 1 } },
      { text: 'æ‹æ„›ç›¸è«‡ãƒ»ãƒãƒƒãƒãƒ³ã‚°ã‚¢ãƒ—ãƒªã®ä½“é¨“è«‡', scores: { charachara: 2, perapera: 1 } },
      { text: 'ä½•ã‚‚åå¿œã—ãªã„ã‘ã©å…¨éƒ¨è¦‹ã¦ã‚‹', scores: { herahera: 2, purapura: 1 } }
    ]
  }
];

let currentQ = 0;
const scores = {};
Object.keys(TYPES).forEach(k => scores[k] = 0);

const $top      = document.getElementById('screen-top');
const $question = document.getElementById('screen-question');
const $result   = document.getElementById('screen-result');
const $fill     = document.getElementById('progress-fill');
const $pLabel   = document.getElementById('progress-label');
const $qText    = document.getElementById('question-text');
const $choices  = document.getElementById('choices');
const $rBadge   = document.getElementById('result-badge');
const $rType    = document.getElementById('result-type');
const $rDesc    = document.getElementById('result-desc');

function showScreen(el) {
  [$top, $question, $result].forEach(s => s.classList.remove('active'));
  el.classList.add('active');
  el.style.animation = 'none';
  el.offsetHeight;
  el.style.animation = '';
}

function renderQuestion() {
  const q = QUESTIONS[currentQ];
  const total = QUESTIONS.length;
  $fill.style.width = ((currentQ + 1) / total * 100) + '%';
  $pLabel.textContent = 'Q' + (currentQ + 1) + ' / ' + total;
  $qText.textContent = q.text;
  $qText.style.animation = 'none';
  $qText.offsetHeight;
  $qText.style.animation = '';

  $choices.innerHTML = '';
  q.choices.forEach(function(c, i) {
    var btn = document.createElement('button');
    btn.className = 'choice-btn';
    btn.textContent = c.text;
    btn.addEventListener('click', function() { selectChoice(i); });
    $choices.appendChild(btn);
  });
}

function selectChoice(idx) {
  var btns = $choices.querySelectorAll('.choice-btn');
  btns.forEach(function(b) { b.style.pointerEvents = 'none'; });
  btns[idx].classList.add('selected');

  var chosen = QUESTIONS[currentQ].choices[idx];
  Object.keys(chosen.scores).forEach(function(k) {
    scores[k] += chosen.scores[k];
  });

  setTimeout(function() {
    currentQ++;
    if (currentQ < QUESTIONS.length) {
      renderQuestion();
    } else {
      showResult();
    }
  }, 350);
}

function showResult() {
  var maxScore = -1;
  var winners = [];
  Object.keys(scores).forEach(function(k) {
    if (scores[k] > maxScore) { maxScore = scores[k]; winners = [k]; }
    else if (scores[k] === maxScore) { winners.push(k); }
  });
  var winnerKey = winners[Math.floor(Math.random() * winners.length)];
  var type = TYPES[winnerKey];

  $rBadge.textContent = type.emoji;
  $rType.textContent = type.name;
  $rDesc.textContent = type.desc;

  showScreen($result);

  document.getElementById('btn-share').onclick = function() {
    var siteUrl = 'https://paul13131313.github.io/ura-shindan/';
    var shareText = '\u79C1\u306E\u88CF\u306E\u9854\u306F\u300C' + type.name + '\u300D\u3067\u3057\u305F\u2026\uD83D\uDE08\n\u3042\u306A\u305F\u306E\u88CF\u306E\u9854\u306F\uFF1F\u2192 ' + siteUrl + '\n#\u88CF\u306E\u9854\u8A3A\u65AD';
    var url = 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(shareText);
    window.open(url, '_blank', 'width=550,height=420');
  };
}

function resetQuiz() {
  currentQ = 0;
  Object.keys(scores).forEach(function(k) { scores[k] = 0; });
  renderQuestion();
  showScreen($question);
}

document.getElementById('btn-start').addEventListener('click', function() {
  resetQuiz();
});
document.getElementById('btn-retry').addEventListener('click', function() {
  resetQuiz();
});
</script>
</body>
</html>
